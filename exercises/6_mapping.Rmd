---
title: "Mapping"
author: "John M. Drake"
date: "May 23, 2022"
output: pdf_document
urlcolor: blue
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Maps that georeference non-spatial quantitative information may be especially difficult for the casual observer to properly interpret.
Maps of COVID-19 incidence were produced during the pandemic and used by many people for both public and personal decision-making. 
[One study](https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2774639) looked at how knowledge risk perception and behavioral intentions were influenced by six different maps of COVID-19 prevalence in the US on May 11, 2022.

\resizebox{\textwidth}{!}{
\includegraphics{../images/covid-maps.png}
}

<small>[Figure 1](https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2774639) Six maps of COVID-19 prevalence in the US on May 11, 2020 used in a study assessing the effectiveness of different map features on the public understanding of the COVID-19 pandemic.</small>

Some key findings of the study included:

- Maps of prevalance (per capita cases) translated poorly to knowledge about total cases.
- Choropleth maps were superior to bubble plots, perhaps because they de-emphasize the relative importance of large population centers and rural areas
- Small areas with high prevalence are hard to indicate on national maps
- Popular understanding was improved by aggregating information to the state level
- Maps of per capita prevalence were more informative than maps of total cases
- Viewing maps (versus not view maps) had no measurable impact on individual risk perception
- Viewing maps (versus not view maps) made viewers slightly more optimistic about societal risk
- Viewing maps (versus not view maps) had no influenze on behavior
- Viewing maps led to less accurate knowledge about total cases compared with having no information at all


# prompts

present info about both prev and tot case

locates infection in a way relevent to both public policy and individual decision making (consider scale)
(finer scale is not necessarily better)

# todo: 

generate basic choropleth etc.,   
eleborate prompts

# Covid Data

Download this file from dropbox, and place it in the `data` folder of your R Project.

<https://www.dropbox.com/s/umv6887fzxozf6g/covid_data_20220519.rds?dl=0>

```{r}
covid_data <- readRDS("../data/covid_data_20220519.rds") # edit path as needed
  
covid_county <- covid_data$county_dat # US county level data
covid_county <- covid_data$us_dat # US state level
covid_county <- covid_data$world_dat # World data by country

```

# choropleths

```{r}
library(tidyverse)
library(choroplethr)
library(choroplethrMaps)

# GA county level data
GA_county <- covid_county %>% 
  filter(location == "Georgia",
         source == "JHU") %>% 
  
latest_date <- GA_county$date %>% max()

GA_county %>% 
  filter(variable %in% c("Daily_Cases", "Daily_Deaths")) %>% 
  filter(date == latest_date)
  

covid_county <- covid_data$county_dat

## join data do fips

#county_choropleth(state_zoom = zoom, legend = legend, title = title)

county_map <- function(data, variable, legend = "", title = "") {
  zoom <- data$state.name %>% unique() %>% tolower()
  master_dataset$state.name %>% unique()
  data %>% select(region = fips, value = variable) %>% 
    mutate(region = as.numeric(region)) %>% 
    county_choropleth(state_zoom = zoom, legend = legend, title = title)
}


```

